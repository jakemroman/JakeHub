--Copyright Jake Roman 2015 Some rights reserved
-- This copyright does not protect the name of this Operating system.
-- This operating system has nothing to do with Microsoft.
--[[

This Copyright is to protect the following things:
  * This Code.
  * The distribution of this code.
  
--]]



if pocket then
  term.setBackgroundColor(colors.lightBlue)
  term.clear()
  x,y = term.getSize()
  paintutils.drawFilledBox(2,2,x - 1,y - 1,colors.white)
  term.setCursorPos(3,3)
  term.setTextColor(colors.gray)
  write(":/")
  term.setCursorPos(3,4)
  write("This os will")
  term.setCursorPos(3,5)
  write("not work on your")
  term.setCursorPos(3,6)
  write("Pocket computer.")
  x,y = term.getSize()
  term.setCursorPos(3,y - 2)
  term.setTextColor(colors.gray)
  term.setBackgroundColor(colors.lightGray)
  maxX,maxY = term.getSize()
  write("OK")
  while true do
    e,c,x,y = os.pullEvent("mouse_click")
    if x >= 3 and x <= 5 and y == maxY - 2 then
      os.shutdown()
    end
  end
end
if not fs.isDir("Windows") then
  term.setBackgroundColor(colors.lightBlue)
  term.clear()
  x,y = term.getSize()
  paintutils.drawFilledBox(2,2,x - 1,y - 1,colors.white)
  term.setCursorPos(3,3)
  term.setBackgroundColor(colors.white)
  term.setTextColor(colors.gray)
  print("Welcome to Windows 7! / JakeOS 2")
  term.setCursorPos(3,4)
  print("Press Next.")
  term.setCursorPos(3,y - 2)
  term.setBackgroundColor(colors.lightGray)
  term.setTextColor(colors.gray)
  write("Next")
  while true do
    e,c,xPos,yPos = os.pullEvent("mouse_click")
    if xPos > 2 and xPos < 7 and yPos == 17 then
      break
    end
  end
  x,y = term.getSize()
  paintutils.drawFilledBox(2,2,x - 1,y - 1,colors.white)
  term.setCursorPos(3,3)
  term.setTextColor(colors.gray)
  x,y = term.getSize()
  x = x - 2
  y = y - 5
  write("Please Agree to the following terms:")
  paintutils.drawFilledBox(3,5,x,y,colors.lightGray)
  term.setCursorPos(3,5)
  term.setTextColor(colors.black)
  write("This software is copyrighted and may")
  term.setCursorPos(3,6)
  write("not be re-distributed.")
  term.setCursorPos(3,7)
  write("Do not copy any code from this")
  term.setCursorPos(3,8)
  write("operating system")
  term.setCursorPos(3,9)
  write("This does not in any way")
  term.setCursorPos(3,10)
  write("Have anything to do with")
  term.setCursorPos(3,11)
  write("Microsoft.")
  term.setCursorPos(3,9)
  x,y = term.getSize()
  term.setCursorPos(3,y - 2)
  term.setBackgroundColor(colors.lime)
  term.setTextColor(colors.gray)
  write(" Agree ")
  term.setCursorPos(3,y - 3)
  term.setBackgroundColor(colors.red)
  write("Decline")
  maxX,maxY = term.getSize()
  while true do
    e,c,x,y = os.pullEvent("mouse_click")
    if x > 2 and x <= 9 then
      if y == 17 then
        break
      end
      if y == 16 then
        fs.delete("startup")
        os.reboot()
      end
    end
  end
  x,y = term.getSize()
  paintutils.drawFilledBox(2,2,x - 1,y - 1,colors.white)
  term.setCursorPos(3,3)
  term.setTextColor(colors.gray)
  write("Download strafe game?")
  term.setCursorPos(3,4)
  write("Credit to CrazedProgrammer for making strafe")
  term.setCursorPos(3,y - 2)
  term.setTextColor(colors.gray)
  term.setBackgroundColor(colors.lime)
  write("Yes")
  term.setCursorPos(3,y - 3)
  term.setBackgroundColor(colors.red)
  write("No ")
  while true do
    e,c,x,y = os.pullEvent("mouse_click")
    if x >= 3 and x <= 6 then
      if y == 16 then
        break
      end
      if y == 17 then
        h = http.get("http://pastebin.com/raw.php?i=bj3qj1Pj")
        if h then
          f = fs.open("Strafe","w")
          f.writeLine(h.readAll())
          f.close()
        end
        break
      end
    end
  end
  x,y = term.getSize()
  paintutils.drawFilledBox(2,2,x - 1,y - 1,colors.white)
  term.setCursorPos(3,3)
  term.setTextColor(colors.gray)
  write("Installation Done!")
  fs.makeDir("Windows")
  fs.makeDir("Windows/programs")
  term.setCursorPos(3,5)
  write("Ready to reboot.")
  term.setCursorPos(3,y - 2)
  term.setBackgroundColor(colors.lightGray)
  term.setTextColor(colors.gray)
  write("Reboot")
  while true do
    e,c,x,y = os.pullEvent("mouse_click")
    if x > 2 and x <= 8 and y == 17 then
      os.reboot()
    end
  end
end
term.setBackgroundColor(colors.lightBlue)
term.clear()
function center(str)
  maxX,maxY = term.getSize()
  curX,curY = term.getCursorPos()
  maxX = maxX / 2
  sub = #str / 2
  maxX = maxX - sub
  term.setCursorPos(maxX,curY)
  print(str)
end
x,y = term.getSize()
y = y / 2
term.setCursorPos(1,y)
term.setTextColor(colors.white)
center("Windows 7")
sleep(2)
term.setBackgroundColor(colors.black)
term.clear()
sleep(0.1)
term.setBackgroundColor(colors.gray)
term.clear()
sleep(0.1)
term.setBackgroundColor(colors.lightGray)
term.clear()
sleep(0.1)
term.setBackgroundColor(colors.white)
term.clear()
x,y = term.getSize()
y = y - 2
while true do
  term.setBackgroundColor(colors.white)
  term.clear()
  if fs.exists("/Windows/background") then
    paintutils.drawImage(paintutils.loadImage("/Windows/background"),1,1)
  end
  x,y = term.getSize()
  paintutils.drawFilledBox(1,y,x,y,colors.lightGray)
  term.setCursorPos(1,y)
  term.setBackgroundColor(colors.blue)
  term.setTextColor(colors.white)
  write(" Start ")
  paintutils.drawFilledBox(2,2,4,4,colors.blue)
  term.setCursorPos(2,2)
  term.setBackgroundColor(colors.lightGray)
  write("...")
  paintutils.drawFilledBox(2,6,4,8,colors.black)
  term.setCursorPos(2,6)
  term.setTextColor(colors.yellow)
  write(">")
  term.setTextColor(colors.white)
  write("_")
  term.setCursorPos(2,10)
  term.setBackgroundColor(colors.lightBlue)
  term.setTextColor(colors.gray)
  write("  /")
  term.setCursorPos(2,11)
  write(" / ")
  term.setCursorPos(2,12)
  term.setTextColor(colors.lightGray)
  write("@  ")
  e,c,x,y = os.pullEvent("mouse_click")
  if x >= 2 and x <= 4 and y >= 10 and y <= 12 then
    term.setBackgroundColor(colors.white)
    term.clear()
    paintutils.drawLine(1,1,51,1,colors.lightGray)
    term.setCursorPos(2,1)
    term.setTextColor(colors.gray)
    write("Paint")
    term.setCursorPos(2,3)
    term.setBackgroundColor(colors.white)
    term.setTextColor(colors.black)
    write("File to paint: ")
    input = read()
    shell.run("paint "..input)
  end
  if x >= 2 and x <= 4 and y >= 6 and y <= 8 then
    term.setBackgroundColor(colors.black)
    term.clear()
    term.setCursorPos(1,1)
    shell.run("shell")
  end
  if x >= 2 and x <= 4 and y >= 2 and y <= 4 then
    while true do
      term.setBackgroundColor(colors.blue)
      term.clear()
      x,y = term.getSize()
      paintutils.drawLine(1,1,x,1,colors.lightGray)
      term.setCursorPos(2,1)
      term.setTextColor(colors.gray)
      write("Programs:")
      term.setCursorPos(x,1)
      term.setBackgroundColor(colors.red)
      term.setTextColor(colors.white)
      write("X")
      list = fs.list("/Windows/programs")
      term.setCursorPos(1,2)
      term.setBackgroundColor(colors.blue)
      term.setTextColor(colors.white)
      for i=1,#list do
        print(" "..list[i])
      end
      e,c,x,y = os.pullEvent("mouse_click")
      if x == 51 and y == 1 then
        break
      end
      for i=1,#list do
        if x > 1 and x <= #list[i] and y == i + 1 then
          term.setBackgroundColor(colors.black)
          term.clear()
          term.setCursorPos(1,1)
          term.setTextColor(colors.white)
          shell.run("/Windows/programs/"..list[i])
        end
      end
      sleep(0)
    end
  end
  if x >= 1 and x <= 8 and y == 19 then
    x,y = term.getSize()
    paintutils.drawFilledBox(1,y - 7,10,y - 1,colors.gray)
    term.setCursorPos(2,18)
    term.setTextColor(colors.white)
    write("Power")
    term.setCursorPos(2,17)
    write("Info")
    term.setCursorPos(2,16)
    write("Settings")
    term.setCursorPos(2,15)
    write("Update")
    e,c,x,y = os.pullEvent("mouse_click")
    if x >= 1 and x <= 10 then
      if y == 15 then
        term.setBackgroundColor(colors.white)
        term.clear()
        paintutils.drawLine(1,1,51,1,colors.lightGray)
        term.setCursorPos(2,1)
        term.setTextColor(colors.white)
        write("Update")
        term.setCursorPos(2,3)
        term.setTextColor(colors.black)
        h = http.get("https://raw.github.com/jakemroman/JakeHub/master/win7")
        if h == nil then
          term.setTextColor(colors.red)
          write("Failed :/")
        else
          data = h.readAll()
          h.close()
          curProgram = shell.getRunningProgram()
          f = fs.open(curProgram,"r")
          curData = f.readAll()
          f.close()
          term.setBackgroundColor(colors.white)
          if curData ~= data then
            print("Update is avalible download it?")
            term.setCursorPos(2,5)
            term.setTextColor(colors.gray)
            term.setBackgroundColor(colors.lightGray)
            write("Yes")
            term.setCursorPos(2,6)
            term.setBackgroundColor(colors.red)
            write("No ")
            while true do
              e,c,x,y = os.pullEvent("mouse_click")
              if x >= 2 and x <= 5 then
                if y == 5 then
                  fs.delete(curProgram)
                  sleep(0)
                  f = fs.open(curProgram,"w")
                  f.writeLine(data)
                  f.close()
                  term.setCursorPos(2,8)
                  term.setBackgroundColor(colors.white)
                  term.setTextColor(colors.lime)
                  write("Success!")
                  sleep(2)
                  os.reboot()
                  break
                end
                if y == 6 then
                  term.setCursorPos(2,8)
                  term.setBackgroundColor(colors.white)
                  term.setTextColor(colors.gray)
                  write("Not Downloading.")
                  break
                end
              end
            end
          else
            term.setTextColor(colors.lime)
            write("Up to date")
          end
        end
        term.setCursorPos(51,1)
        term.setBackgroundColor(colors.red)
        term.setTextColor(colors.white)
        write("X")
        while true do
          e,c,x,y = os.pullEvent("mouse_click")
          if x == 51 and y == 1 then
            break
          end
        end
      end
      if y == 16 then
        while true do
          term.setBackgroundColor(colors.white)
          term.clear()
          paintutils.drawLine(1,1,51,1,colors.lightGray)
          term.setCursorPos(2,1)
          term.setTextColor(colors.gray)
          write("Settings")
          term.setCursorPos(51,1)
          term.setTextColor(colors.white)
          term.setBackgroundColor(colors.red)
          write("X")
          term.setCursorPos(1,2)
          term.setBackgroundColor(colors.white)
          term.setTextColor(colors.black)
          term.setCursorPos(2,3)
          write("Background:")
          term.setCursorPos(2,4)
          term.setBackgroundColor(colors.lightGray)
          term.setTextColor(colors.gray)
          write("Modify")
          term.setCursorPos(2,5)
          term.setBackgroundColor(colors.red)
          write("Remove")
          term.setCursorPos(2,7)
          term.setBackgroundColor(colors.white)
          term.setTextColor(colors.black)
          write("Programs:")
          term.setBackgroundColor(colors.lightGray)
          term.setTextColor(colors.gray)
          term.setCursorPos(2,8)
          write("Modify")
          term.setCursorPos(2,10)
          term.setBackgroundColor(colors.white)
          term.setTextColor(colors.black)
          write("Label:")
          term.setCursorPos(2,11)
          term.setTextColor(colors.gray)
          term.setBackgroundColor(colors.lightGray)
          write("Set")
          term.setTextColor(colors.black)
          term.setBackgroundColor(colors.white)
          e,c,x,y = os.pullEvent("mouse_click")
          if x >= 2 and x <= 5 and y == 11 then
            term.setBackgroundColor(colors.white)
            term.clear()
            term.setCursorPos(2,2)
            term.setTextColor(colors.gray)
            write("Set Label to: ")
            input = read()
            os.setComputerLabel(input)
          end
          if x >= 2 and x < 8 and y == 8 then
            while true do
              term.setBackgroundColor(colors.white)
              term.clear()
              paintutils.drawLine(1,1,51,1,colors.lightGray)
              term.setCursorPos(2,1)
              term.setTextColor(colors.gray)
              write("Programs:")
              term.setCursorPos(51,1)
              term.setTextColor(colors.white)
              term.setBackgroundColor(colors.red)
              write("X")
              term.setCursorPos(1,2)
              term.setTextColor(colors.white)
              term.setBackgroundColor(colors.white)
              term.setCursorPos(2,3)
              term.setTextColor(colors.black)
              write("Programs")
              term.setCursorPos(2,5)
              term.setBackgroundColor(colors.lightGray)
              term.setTextColor(colors.gray)
              write(" Add  ")
              term.setCursorPos(2,6)
              write("Remove")
              e,c,x,y = os.pullEvent("mouse_click")
              if x == 51 and y == 1 then
                break
              end
              if x >= 1 and x <= 7 then
                if y == 6 then
                  term.setBackgroundColor(colors.white)
                  term.clear()
                  term.setCursorPos(2,2)
                  term.setTextColor(colors.black)
                  write("Remove Program: ")
                  input = read()
                  if fs.exists("/Windows/programs/"..input) then
                    fs.delete("/Windows/programs/"..input)
                    print(" Removed")
                  else
                    print(" Not Found")
                  end
                  sleep(1)
                end
                if y == 5 then
                  term.setBackgroundColor(colors.white)
                  term.clear()
                  term.setCursorPos(2,2)
                  term.setTextColor(colors.black)
                  write("Add Program: ")
                  input = read()
                  if fs.exists(input) then
                    fs.copy(input,"/Windows/programs/"..input)
                    print(" Added")
                  else
                    print(" Not Found")
                  end
                  sleep(1)
                end
              end
            end
          end
          if x == 51 and y == 1 then
            break
          end
          if x >= 2 and x < 8 and y == 5 then
            fs.delete("/Windows/background")
            term.setBackgroundColor(colors.white)
            term.clear()
            term.setCursorPos(2,2)
            term.setTextColor(colors.black)
            print("Background Reset")
            sleep(1.5)
          end
          if x >= 2 and x < 8 and y == 4 then
            term.setBackgroundColor(colors.white)
            term.clear()
            term.setCursorPos(2,2)
            term.setBackgroundColor(colors.white)
            term.setTextColor(colors.black)
            print("Set Background:")
            term.setCursorPos(2,4)
            write("File: ")
            input = read()
            if fs.exists(input) then
              if fs.exists("/Windows/background") then
                print(" Background Already Set!")
              else
                fs.copy(input,"/Windows/background")
                print(" Background Set.")
              end
            else
              print(" File not found.")
            end
            sleep(2)
          end
        end
      end
      if y == 17 then
        while true do
          term.setBackgroundColor(colors.blue)
          term.clear()
          paintutils.drawLine(1,1,51,1,colors.lightGray)
          term.setCursorPos(2,1)
          term.setTextColor(colors.gray)
          write("Info")
          term.setCursorPos(51,1)
          term.setTextColor(colors.white)
          term.setBackgroundColor(colors.red)
          write("X")
          term.setCursorPos(1,2)
          term.setBackgroundColor(colors.blue)
          term.setTextColor(colors.white)
          print("")
          print(" Operating System: Windows 7")
          print(" All Of Windows 7 was made by Jake")
          print(" Notice: This is not in any way")
          print(" Associated with Microsoft.")
          print("")
          print(" Thank you for using Windows 7")
          print(" By JakeOS")
          e,c,x,y = os.pullEvent("mouse_click")
          if x == 51 and y == 1 then
            break
          end
        end
      end
      if y == 18 then
        while true do
          term.setBackgroundColor(colors.lightGray)
          term.clear()
          term.setCursorPos(1,19)
          paintutils.drawLine(1,19,51,19,colors.gray)
          term.setBackgroundColor(colors.black)
          term.setTextColor(colors.white)
          term.setCursorPos(1,19)
          write(" Start ")
          x,y = term.getSize()
          paintutils.drawFilledBox(2,2,20,6,colors.white)
          term.setCursorPos(3,3)
          term.setTextColor(colors.gray)
          print("Shutdown")
          term.setCursorPos(3,4)
          print("Reboot")
          term.setCursorPos(3,5)
          print("Cancel")
          e,c,x,y = os.pullEvent("mouse_click")
          if x > 2 and x < 20 then
            if y == 3 then
              os.shutdown()
            end
            if y == 4 then
              os.reboot()
            end
            if y == 5 then
              break
            end
          end
        end
      end
    end
  end
end
